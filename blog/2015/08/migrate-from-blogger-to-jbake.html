<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <meta charset="utf-8" />
      <title>利用 jbake 從 blogger 搬家到 github</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta name="description" content="" />
      <meta name="author" content="cloudtu" />
      <meta name="keywords" content="" />

      <!-- Le styles -->
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
      <link rel="stylesheet" href="/css/base.css" />
      <link rel="stylesheet" href="/css/prettify.css" />
  </head>
  <body onload="prettyPrint()">

  <!-- facebook script -->
  <div id="fb-root"></div>
  <script xml:space="preserve">
  //<![CDATA[
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.4";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
  //]]>
  </script>

  <div id="wrap">
    <div>

    <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" shape="rect" href="/index.html">CloudTu's blog</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" shape="rect">Tags<b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu">
                <li>
                  <a shape="rect" href="/tags/android.html">android</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/aws.html">aws</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/bitbucket.html">bitbucket</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/cassandra.html">cassandra</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/connection-pool.html">connection-pool</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/eclipse.html">eclipse</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/gae.html">gae</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/git.html">git</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/github.html">github</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/gradle.html">gradle</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/groovy.html">groovy</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/guava.html">guava</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/java.html">java</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/javascript.html">javascript</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jax-rs.html">jax-rs</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jbake.html">jbake</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jersey.html">jersey</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jetty.html">jetty</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jquery.html">jquery</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/lambda.html">lambda</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/linux.html">linux</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/mac.html">mac</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/nexus7.html">nexus7</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/notepad-plus-plus.html">notepad-plus-plus</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/oauth2.html">oauth2</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/olap.html">olap</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/python.html">python</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/remote-control.html">remote-control</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/router.html">router</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/selenium.html">selenium</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/spring.html">spring</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/ssh.html">ssh</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/switch.html">switch</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/tomato.html">tomato</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/tomcat.html">tomcat</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/windows7.html">windows7</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/喔~鋼普拉.html">喔~鋼普拉</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/心情記事.html">心情記事</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/敗~敗家啦.html">敗~敗家啦</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/版控系統.html">版控系統</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/程式語言.html">程式語言</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/阿殺不魯.html">阿殺不魯</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/電影、戲劇.html">電影、戲劇</a>
                </li>
              </ul>
            </li>
            <li><a shape="rect" href="/archive.html">Archive</a></li>
            <li><a shape="rect" href="/feed.xml">RSS</a></li>
            <li><a shape="rect" href="/about.html">About</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" shape="rect">Search<b class="caret"></b></a>
              <ul class="dropdown-menu google_search">
                <li>
                  <script xml:space="preserve">
                  //<![CDATA[
                    (function() {
                      var cx = '001738447238955852876:bkori8ynpby';
                      var gcse = document.createElement('script');
                      gcse.type = 'text/javascript';
                      gcse.async = true;
                      gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                          '//cse.google.com/cse.js?cx=' + cx;
                      var s = document.getElementsByTagName('script')[0];
                      s.parentNode.insertBefore(gcse, s);
                    })();
                  //]]>
                  </script>
                  <gcse:searchbox-only></gcse:searchbox-only>
                </li>
              </ul>
            </li>
          </ul>

        </div><!--/.nav-collapse -->
      </div>
    </div>

  </div>
    <div class="container">

      <div class="page-header">
        <h1>利用 jbake 從 blogger 搬家到 github</h1>
      </div>

      <p><em>2015-08-18</em></p>

      <p>
        <em>Tags:
          <span>
            <a shape="rect" href="../../../tags/程式語言.html">程式語言</a>
            <span>,</span>
          </span>
          <span>
            <a shape="rect" href="../../../tags/java.html">java</a>
            <span>,</span>
          </span>
          <span>
            <a shape="rect" href="../../../tags/jbake.html">jbake</a>
            
          </span>
        </em>
      </p>

      <p><p>打算搬離 <a href="http://blogger.com">blogger</a> 的念頭很早就有了，只是一直沒有行動。主要原因還是打包整個站台的文章、圖片太麻煩，所以就一直沒動手。二週前開始有了段長時間的空檔，所以下定決心告別 blogger，自己蓋個新 blog 站台。</p><h2>為何搬離 blogger</h2><p>沒事 blogger 用的好好的為何會想搬家呢? 原因大略是下述儿點</p>
<ol>
  <li>不易撰寫技術文章。blogger 上面寫一般生活記事很容易，但是寫程式開發技術文就不是這麼回事了，要讓美美的程式碼秀出正常樣子實在太累人。</li>
  <li>發佈文章前的文章檢視功能跑起來超慢。這可能跟我在 blogger 上插了很多外掛模組有關，但是這些模組我都會用到呀不能拿掉，所以這問題無解 囧rz</li>
</ol><h2>選擇新家</h2><p>既然要搬家了，那新家要怎麼選呢? 我決定 <code>自己的 blog 自己蓋</code>。</p><p>ingram 的 <a href="http://ingramchen.io/blog/2014/01/move-to-new-home-again.html">新年搬新家- Jbake</a> 裡提到 <code>任何 Hosting Service 最終都會消失</code> 是非常中肯的見解。雖然不見得一定會消失，但是未來的事實在太難說。現在寫 blog 早就不潮了，但是寫了十多年累積的 400 多篇文章說什麼也不能隨著搬家歸零重來。為了避免未來一而再再而三的搬家，還是自己蓋 blog 吧!</p><h2>新 blog 怎麼搭建?</h2><p>既然要自己土砲了，那當然是找目前市面上 <code>static site generator</code> 產品有哪些。 <a href="https://www.staticgen.com/">StaticGen</a> 上看到的統計報表裡，最熱門的產品是 <a href="http://jekyllrb.com/">jekyll</a>，不過我是 java guy 所以我選 <a href="http://jbake.org">jbake</a> 這個 java solution。</p><p>下列儿項 jbake 產品特性是我選它的原因</p>
<ol>
  <li>完整的<a href="http://www.jbake.org/docs/2.4.0/">說明書</a>。</li>
  <li>多人維護的<a href="https://github.com/jbake-org/jbake">專案</a>，不用擔心突然被放生。</li>
  <li>blog 文章支援 <code>markdown</code>, <code>html</code> 格式。html 格式就不用說了，算是舊時代的遺物，一定會支援。寫新文章的話，如果不是文章格式很複雜，我是一定會選擇 markdown 格式，可以省時又省力。</li>
  <li>內建 <code>jetty</code>，文章寫完後可以馬上在 local 跑起來看看結果正不正確，不需丟到 remote 才能進行驗証</li>
  <li>文章裡貼的程式碼可以用 <code>pretty print</code> 風格來呈現。</li>
</ol><h2>jbake 快速上手</h2><p>下載 <a href="http://www.jbake.org/download.html">jbake</a> 進行安裝。目前 v2.4.0 最新版有個<a href="https://github.com/jbake-org/jbake/issues/226">嚴重的 bug</a>，每次 site gen 時一定會全部資料重建，沒辦法進行 incremental render，建議安裝 v2.3.2 版。</p><p>jbake v2.3.2 常用指令沒儿個，搞懂它吧!</p>
<!--?prettify?-->
<pre><code class="sh"># init jbake project
jbake -i
jbake -i &lt;freemarker|groovy|thymeleaf&gt;

# site gen
jbake -b
jbake -b &lt;source&gt; &lt;output&gt;

# start local server
jbake -s
jbake -s &lt;directory&gt;

# site gen &amp; start local server
jbake -b -s
</code></pre><p><a href="http://www.jbake.org/docs/2.4.0/">官方文件</a>不長而且很完整，建議看過一遍。</p><h2>jbake.properties 設定檔說明</h2><p>其中比較需要特別說明的是 <code>db.store=local</code>，設成這值代表每次 jbake 只會針對異動(新增或修改)的文章進行 site gen，不會全部的文章都進行 site gen，這是一個很有用的功能!</p>
<!--?prettify?-->
<pre><code class="sh"># defines the host URL for the site
site.host={my_blog_site_url}

# render index file?
render.index=true
# render archive file?
render.archive=true
# render feed file?
render.feed=true
# render tag files?
render.tags=true
# render sitemap.xml file?
render.sitemap=true

# filename of index template file
template.index.file=index.thyme
# filename of archive template file
template.archive.file=archive.thyme
# filename of tag template file
template.tag.file=tags.thyme
# filename of sitemap template file
template.sitemap.file=sitemap.thyme
# filename of post template file
template.post.file=post.thyme
# filename of page template file
template.page.file=page.thyme
# filename of feed template file
template.feed.file=feed.thyme

# default date format used in content files
date.format=yyyy-MM-dd

# database store (local, memory)
# This option defines whether the content store built while parsing your content files is persisted to disk or not.When it is persisted to disk the next time you perform a bake only those content files that have changed will be rendered speeding up the process. When it is not persisted to disk, i.e. kept in memory, a full bake of all content is performed every time.
db.store=local
</code></pre><h2>撰寫 markdown 文件的注意事項</h2><p>文章如果出現 <code>包了太多層的條列式項目</code> 可能會導致 site gen 後的 html 出現排版亂掉的問題，撰寫文章時要迴避這問題。</p><h2>markdown 文件如何插入圖片?</h2><p>只是單純的文章插入圖片可以直接用 markdown 語法</p>
<!--?prettify?-->
<pre><code>![imageName](imageFileUrl)
</code></pre><p>如果要有 <code>點擊縮圖時開啟原始大圖</code> 效果，必需用 html 語法</p>
<!--?prettify?-->
<pre><code class="html">&lt;a href=&quot;/img/{myImage.jpg}&quot; target=&quot;_blank&quot;&gt;
    &lt;img src=&quot;/img/{myImage.jpg}&quot; width=&quot;{width}&quot; /&gt;
&lt;/a&gt;
</code></pre><h2>markdown 文件如何插入程式碼?</h2><p>可以用 markdown 或 html 語法，個人推薦用 markdown 語法</p>
<pre><code># markdown 格式
&lt;!--?prettify linenums=true?--&gt;
```java
public class CloudTu {
  public static void main(String[] args) {
    System.out.print(&quot;hello world!&quot;);
  }
}
```
</code></pre>
<pre><code class="html"># html 格式
&lt;pre class=&quot;prettyprint linenums&quot;&gt;
public class CloudTu {
  public static void main(String[] args) {
    System.out.print(&quot;hello world!&quot;);
  }
}
&lt;/pre&gt;
</code></pre><p>site gen 結果像下面這樣，程式碼帶有行號而且是 pretty print 風格</p>
<!--?prettify linenums=true?-->
<pre><code class="java">public class CloudTu {
  public static void main(String[] args) {
    System.out.print(&quot;hello world!&quot;);
  }
}
</code></pre><p>如果不想帶行號的話則是把 <code>linenums</code> 拿掉</p>
<pre><code># markdown 格式
&lt;!--?prettify?--&gt;
my code...etc
</code></pre>
<pre><code class="html"># html 格式
&lt;pre class=&quot;prettyprint&quot;&gt;
    my code...etc
&lt;pre&gt;
</code></pre><h2>新 blog 要放在哪?</h2><p>任何可以放 static site 的雲端空間都可以當存放站台，我自己的選擇是放在 github。原因的話有二個</p>
<ol>
  <li>static site 放 github <strike>正潮</strike>不用錢</li>
  <li>github 的網路頻寬夠大，連過去速度夠快</li>
</ol><p>在 github 上建立 static site 的<a href="https://pages.github.com/">方法</a>很簡單，分成二種方式</p>
<ul>
  <li><p>第一種是在 github 上建立 <code>{myAccount}.github.io</code> 的 repository，接著把 static site 推上去，然後連到 <code>http://{myAccount}.github.io</code> 就可以看到建立的站台</p></li>
  <li><p>第二種則是在 github 現有的 <code>{myProject}</code> repository 建立 <code>gh-pages</code> branch，接著把 static site 推上去，然後連到 <code>http://{myAccount}.github.io/{myProject}</code> 就可以看到建立的站台</p></li>
</ul><h2>舊資料要怎麼搬過去?</h2><p>搬舊資料沒啥現成工具可用，只好自己寫工具。我利用 <a href="http://jsoup.org/">jsoup</a>, <a href="https://github.com/rometools/rome">rome</a> lib 寫了 <a href="https://github.com/cloudtu/blogger-to-jbake">blogger-to-jbake<br/></a> 這個專門從 blogger 搬家到 jbake 的搬遷工具。它可以把放在 blogger 裡的個人文章、圖片全部匯出至本地端，並且轉成 jbake 可以匯入的檔案格式。</p><h2>後記</h2><p>其實 blog 搬家很辛苦，自建 static blog site 就更辛苦了，但是相對的獲益也非常巨大。什麼都自己來代表什麼都掌控在手中，未來如果發生任何狀況都可以自己應付，也不會遇到 vendor 倒了就全部資料人間蒸發的鳥事。記得以前無名小站倒了時網路上哀聲遍野，未來收掉的 blog service 只會更多不會更少，長遠考量下還是自己的 blog 自己蓋比較實際呀~~~</p></p>

      <hr />

      <!-- facebook like button -->
      <div class="fb-like" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false" data-href="http://cloudtu.github.io/blog/2015/08/migrate-from-blogger-to-jbake.html"></div>

      <!-- facebook share button -->
      <div class="fb-share-button" data-layout="button_count" data-href="http://cloudtu.github.io/blog/2015/08/migrate-from-blogger-to-jbake.html"></div>

      <!-- Disqus comment plugin -->
      <div id="disqus_thread"></div>
      <script type="text/javascript" xml:space="preserve">
      //<![CDATA[
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//cloudtu.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      //]]>
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow" shape="rect">comments powered by Disqus.</a></noscript>

    </div>
  </div>
  <div>
      <div id="push"></div>

        <div id="footer">
          <div class="container">
            <p class="muted credit">&copy; <span>2021</span> CloudTu | Baked with <a href="http://jbake.org" shape="rect">JBake
              <span>v2.3.2</span></a></p>
          </div>
        </div>

        <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script xml:space="preserve" src="/js/jquery-2.1.1.min.js"></script>
        <script xml:space="preserve" src="/js/bootstrap.min.js"></script>
        <script xml:space="preserve" src="/js/prettify.js"></script>

      </div>
    </body>
</html>
