<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <meta charset="utf-8" />
      <title>Cassandra的cqlsh安裝步驟</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta name="description" content="" />
      <meta name="author" content="cloudtu" />
      <meta name="keywords" content="" />

      <!-- Le styles -->
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
      <link rel="stylesheet" href="/css/base.css" />
      <link rel="stylesheet" href="/css/prettify.css" />
  </head>
  <body onload="prettyPrint()">

  <!-- facebook script -->
  <div id="fb-root"></div>
  <script xml:space="preserve">
  //<![CDATA[
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.4";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
  //]]>
  </script>

  <div id="wrap">
    <div>

    <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" shape="rect" href="/index.html">CloudTu's blog</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" shape="rect">Tags<b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu">
                <li>
                  <a shape="rect" href="/tags/android.html">android</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/aws.html">aws</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/bitbucket.html">bitbucket</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/cassandra.html">cassandra</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/connection-pool.html">connection-pool</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/eclipse.html">eclipse</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/gae.html">gae</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/git.html">git</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/github.html">github</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/gradle.html">gradle</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/groovy.html">groovy</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/guava.html">guava</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/java.html">java</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/javascript.html">javascript</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jax-rs.html">jax-rs</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jbake.html">jbake</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jersey.html">jersey</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jetty.html">jetty</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jquery.html">jquery</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/lambda.html">lambda</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/linux.html">linux</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/mac.html">mac</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/nexus7.html">nexus7</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/notepad-plus-plus.html">notepad-plus-plus</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/oauth2.html">oauth2</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/olap.html">olap</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/python.html">python</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/remote-control.html">remote-control</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/router.html">router</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/selenium.html">selenium</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/spring.html">spring</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/ssh.html">ssh</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/switch.html">switch</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/tomato.html">tomato</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/tomcat.html">tomcat</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/windows7.html">windows7</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/喔~鋼普拉.html">喔~鋼普拉</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/心情記事.html">心情記事</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/敗~敗家啦.html">敗~敗家啦</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/版控系統.html">版控系統</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/程式語言.html">程式語言</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/阿殺不魯.html">阿殺不魯</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/電影、戲劇.html">電影、戲劇</a>
                </li>
              </ul>
            </li>
            <li><a shape="rect" href="/archive.html">Archive</a></li>
            <li><a shape="rect" href="/feed.xml">RSS</a></li>
            <li><a shape="rect" href="/about.html">About</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" shape="rect">Search<b class="caret"></b></a>
              <ul class="dropdown-menu google_search">
                <li>
                  <script xml:space="preserve">
                  //<![CDATA[
                    (function() {
                      var cx = '001738447238955852876:bkori8ynpby';
                      var gcse = document.createElement('script');
                      gcse.type = 'text/javascript';
                      gcse.async = true;
                      gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                          '//cse.google.com/cse.js?cx=' + cx;
                      var s = document.getElementsByTagName('script')[0];
                      s.parentNode.insertBefore(gcse, s);
                    })();
                  //]]>
                  </script>
                  <gcse:searchbox-only></gcse:searchbox-only>
                </li>
              </ul>
            </li>
          </ul>

        </div><!--/.nav-collapse -->
      </div>
    </div>

  </div>
    <div class="container">

      <div class="page-header">
        <h1>Cassandra的cqlsh安裝步驟</h1>
      </div>

      <p><em>2012-01-18</em></p>

      <p>
        <em>Tags:
          <span>
            <a shape="rect" href="../../../tags/cassandra.html">cassandra</a>
            <span>,</span>
          </span>
          <span>
            <a shape="rect" href="../../../tags/java.html">java</a>
            
          </span>
        </em>
      </p>

      <p>
這篇的說明是以Cassandra 1.0.6版為基準，早期版本可能沒有cqlsh功能。此外，在系統中已先自行建立testks keyspace，並在裡面建了employee columnfamily。
<br>
<br>cqlsh功能簡述如下
<br>在Cassandra 1.x版後，除了cassandra-cli之外，在 
<code>/cassandra_install_folder/bin</code> 裡多了個cqlsh的指令。該指令跟cassandra-cli一樣是個client端工具，可用來連線至server端進行資料維護與查詢。cqlsh有個很大的好處，那就是「支援CQL語法操作」，要查資料時比用cassandra-cli來的輕鬆；但是...也有個很大的問題，cqlsh是在python之上執行，如果OS本身沒裝python，cqlsh就變成看的到吃不到的功能。至於要怎麼安裝?官網完全沒跟你講，也就是說...如果你完全不懂python，你根本連裝都不會裝，更不用提怎麼用了...囧rz
<br>
<br>安裝cqlsh可參考下列步驟
<br>===========================================================================
<br>Ubuntu linux平台的安裝方式如下
<br>
<ol>
 <li>利用synaptic安裝python 2.7。安裝完成後執行下面這行指令可以看到python顯示2.7的版本號。<br><code>python -V</code><br>&nbsp;</li>
 <li> 利用synaptic安裝python-setuptools，python-setuptools必需是給python 2.7使用的版本。<br><br>如果想自行手動安裝python-setuptools，則是可以至<a href="http://pypi.python.org/pypi/setuptools#downloads" target="_blank">官網</a>下載 setuptools-0.6c11-py2.7.egg，並執行下面這行指令進行安裝。<br><code>sudo sh setuptools-0.6c11-py2.7.egg</code><br><br>python-setuptools安裝完成後，執行下面這行指令可看到easy_install指令的相關說明。<br><code>easy_install -h</code><br>&nbsp;</li>
 <li>接著執行下面這行指令，將cql模組裝到python。<br><code>sudo easy_install cql</code></li>
</ol>完成上述的步驟後就可以使用cqlsh的功能了，cqlsh基本操作簡述如下。
<br>1.執行下面這行指令，可查看cqlsh使用說明。
<br>
<div style="color: #274e13;">
 cqlsh -h
</div>
<br>2.如果Cassandra不需帳號密碼就可登入，可執行下面這行指令登入系統。
<br>
<code>cqlsh 127.0.0.1 9160 </code>
<br>
<br>3.如果Cassandra要帳號密碼才可以登入，可執行下面這行指令登入系統。
<br>
<code>cqlsh -u admin -p adminpwd 127.0.0.1 9160</code> 
<br>
<br>4.登入系統後可以利用CQL語法進行各項操作。
<br>
<pre class="prettyprint">cloudtu@cloudtu-VirtualBox:~/cassandra-1.0.6-1/bin$ ./cqlsh 127.0.0.1 9160<br>Connected to Test Cluster at 127.0.0.1:9160.<br>[cqlsh 2.0.0 | Cassandra 1.0.6 | CQL spec 2.0.0 | Thrift protocol 19.19.0]<br>Use HELP for help.<br>cqlsh&gt; use testks;<br>cqlsh:testks&gt; select * from employee;<br> KEY | age | dept |     name |<br>   3 |   3 |   rd |  tester3 |<br>   6 |   6 |  mis |  tester6 |<br>   5 |   5 |   rd |  tester5 |<br>  19 |  19 |   rd | tester19 |<br>  10 |  10 |  mis | tester10 |<br>   8 |   8 |  mis |  tester8 |<br>   2 |   2 |  mis |  tester2 |<br>  16 |  16 |  mis | tester16 |<br>  13 |  13 |   rd | tester13 |<br>   1 |   1 |   rd |  tester1 |<br>  12 |  12 |  mis | tester12 |<br>   9 |   9 |   rd |  tester9 |<br>  14 |  14 |  mis | tester14 |<br>   4 |   4 |  mis |  tester4 |<br>  15 |  15 |   rd | tester15 |<br>  11 |  11 |   rd | tester11 |<br>  20 |  20 |  mis | tester20 |<br>  18 |  18 |  mis | tester18 |<br>   7 |   7 |   rd |  tester7 |<br>  17 |  17 |   rd | tester17 |<br><br>cqlsh:testks&gt; quit;<br>cloudtu@cloudtu-VirtualBox:~/cassandra-1.0.6-1/bin$ <br></pre>===========================================================================
<br>Win7 X64平台的安裝方式如下 
<br>
<ol>
 <li>至<a href="http://python.org/getit/" target="_blank">官網</a>下載python 2.7 x64版本進行安裝，安裝目錄設到 <code>C:\Python\Python27</code>。</li>
 <li>在環境變數的Path參數裡加入python.exe所在目錄(e.g. Path=C:\Python\Python27;...etc)<br><br>安裝完成後執行下面這行指令可以看到python顯示2.7的版本號。<br><code>python -V</code><br>&nbsp;</li>
 <li> 至<a href="http://pypi.python.org/pypi/setuptools#windows" target="_blank">官網</a>下載ez_setup.py，執行下面這行指令安裝python-setuptools。<br><code>python ez_setup.py</code><br><br>python-setuptools安裝完成後，切換到 <code>C:\Python\Python27\Scripts</code>，執行下面這行指令可看到easy_install指令的相關說明。<br><code>easy_install -h</code><br>&nbsp;</li>
 <li>接著執行下面這行指令，將cql模組裝到python。<br><code>easy_install cql</code></li>
</ol>完成上述的步驟後就可以使用cqlsh的功能了，cqlsh基本操作簡述如下。
<br>1.執行下面這行指令，可查看cqlsh使用說明。
<br>
<div style="color: #274e13;">
 python cqlsh -h
</div>
<br>2.如果Cassandra不需帳號密碼就可登入，可執行下面這行指令登入系統。
<br>
<code>python cqlsh 127.0.0.1 9160 </code>
<br>
<br>3.如果Cassandra要帳號密碼才可以登入，可執行下面這行指令登入系統。
<br>
<code>python cqlsh -u admin -p adminpwd 127.0.0.1 9160</code> 
<br>
<br>4.登入系統後可以利用CQL語法進行各項操作。
<br>
<pre class="prettyprint">Z:\apache-cassandra-1.0.6\bin&gt;python cqlsh 127.0.0.1 9160<br>Connected to Test Cluster at 127.0.0.1:9160.<br>[cqlsh 2.0.0 | Cassandra 1.0.6 | CQL spec 2.0.0 | Thrift protocol 19.19.0]<br>Use HELP for help.<br>cqlsh&gt; use testks;<br>cqlsh:testks&gt; select * from employee;<br> KEY | age | dept |     name |<br>   3 |   3 |   rd |  tester3 |<br>   6 |   6 |  mis |  tester6 |<br>   5 |   5 |   rd |  tester5 |<br>  19 |  19 |   rd | tester19 |<br>  10 |  10 |  mis | tester10 |<br>   8 |   8 |  mis |  tester8 |<br>   2 |   2 |  mis |  tester2 |<br>  16 |  16 |  mis | tester16 |<br>  13 |  13 |   rd | tester13 |<br>   1 |   1 |   rd |  tester1 |<br>  12 |  12 |  mis | tester12 |<br>   9 |   9 |   rd |  tester9 |<br>  14 |  14 |  mis | tester14 |<br>   4 |   4 |  mis |  tester4 |<br>  15 |  15 |   rd | tester15 |<br>  11 |  11 |   rd | tester11 |<br>  20 |  20 |  mis | tester20 |<br>  18 |  18 |  mis | tester18 |<br>   7 |   7 |   rd |  tester7 |<br>  17 |  17 |   rd | tester17 |<br><br>cqlsh:testks&gt; quit;<br><br>Z:\apache-cassandra-1.0.6\bin&gt;<br></pre>===========================================================================
</p>

      <hr />

      <!-- facebook like button -->
      <div class="fb-like" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false" data-href="http://cloudtu.github.io/blog/2012/01/cassandracqlsh.html"></div>

      <!-- facebook share button -->
      <div class="fb-share-button" data-layout="button_count" data-href="http://cloudtu.github.io/blog/2012/01/cassandracqlsh.html"></div>

      <!-- Disqus comment plugin -->
      <div id="disqus_thread"></div>
      <script type="text/javascript" xml:space="preserve">
      //<![CDATA[
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//cloudtu.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      //]]>
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow" shape="rect">comments powered by Disqus.</a></noscript>

    </div>
  </div>
  <div>
      <div id="push"></div>

        <div id="footer">
          <div class="container">
            <p class="muted credit">&copy; <span>2021</span> CloudTu | Baked with <a href="http://jbake.org" shape="rect">JBake
              <span>v2.3.2</span></a></p>
          </div>
        </div>

        <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script xml:space="preserve" src="/js/jquery-2.1.1.min.js"></script>
        <script xml:space="preserve" src="/js/bootstrap.min.js"></script>
        <script xml:space="preserve" src="/js/prettify.js"></script>

      </div>
    </body>
</html>
