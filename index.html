<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <meta charset="utf-8" />
      <title>老涂的咁仔店</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta name="description" content="" />
      <meta name="author" content="cloudtu" />
      <meta name="keywords" content="" />

      <!-- Le styles -->
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
      <link rel="stylesheet" href="/css/base.css" />
      <link rel="stylesheet" href="/css/prettify.css" />
  </head>
  <body onload="prettyPrint()">

  <div id="wrap">
    <div>

    <!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" shape="rect" href="/index.html">CloudTu's blog</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" shape="rect">Tags<b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu">
                <li>
                  <a shape="rect" href="/tags/android.html">android</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/aws.html">aws</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/bitbucket.html">bitbucket</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/cassandra.html">cassandra</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/connection-pool.html">connection-pool</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/eclipse.html">eclipse</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/gae.html">gae</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/git.html">git</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/github.html">github</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/gradle.html">gradle</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/groovy.html">groovy</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/guava.html">guava</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/java.html">java</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/javascript.html">javascript</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jax-rs.html">jax-rs</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jbake.html">jbake</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jersey.html">jersey</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jetty.html">jetty</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/jquery.html">jquery</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/lambda.html">lambda</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/linux.html">linux</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/mac.html">mac</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/nexus7.html">nexus7</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/notepad-plus-plus.html">notepad-plus-plus</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/oauth2.html">oauth2</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/olap.html">olap</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/python.html">python</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/remote-control.html">remote-control</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/router.html">router</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/selenium.html">selenium</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/spring.html">spring</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/ssh.html">ssh</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/switch.html">switch</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/tomato.html">tomato</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/tomcat.html">tomcat</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/windows7.html">windows7</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/喔~鋼普拉.html">喔~鋼普拉</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/心情記事.html">心情記事</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/敗~敗家啦.html">敗~敗家啦</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/版控系統.html">版控系統</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/程式語言.html">程式語言</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/阿殺不魯.html">阿殺不魯</a>
                </li>
                <li>
                  <a shape="rect" href="/tags/電影、戲劇.html">電影、戲劇</a>
                </li>
              </ul>
            </li>
            <li><a shape="rect" href="/archive.html">Archive</a></li>
            <li><a shape="rect" href="/feed.xml">RSS</a></li>
            <li><a shape="rect" href="/about.html">About</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" shape="rect">Search<b class="caret"></b></a>
              <ul class="dropdown-menu google_search">
                <li>
                  <script xml:space="preserve">
                  //<![CDATA[
                    (function() {
                      var cx = '001738447238955852876:bkori8ynpby';
                      var gcse = document.createElement('script');
                      gcse.type = 'text/javascript';
                      gcse.async = true;
                      gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                          '//cse.google.com/cse.js?cx=' + cx;
                      var s = document.getElementsByTagName('script')[0];
                      s.parentNode.insertBefore(gcse, s);
                    })();
                  //]]>
                  </script>
                  <gcse:searchbox-only></gcse:searchbox-only>
                </li>
              </ul>
            </li>
          </ul>

        </div><!--/.nav-collapse -->
      </div>
    </div>

  </div>
    <div class="container">
      <div class="index_page_banner">
        <h1 style="margin-top: 0px; margin-bottom: 0px;">老涂的咁仔店</h1>
        <p style="margin-top: 50px; margin-bottom: 0px;">記載生活點滴、敗家記事、程式撰寫...etc</p>
      </div>

      <div>
        <a href="blog/2018/08/guava-cache-memo.html" shape="rect"><h1>Guava Cache 使用說明</h1></a>
        <p>2018-08-29</p>

        <p>
          <em>Tags:
            <span>
              <a shape="rect" href="tags/程式語言.html">程式語言</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/java.html">java</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/guava.html">guava</a>
              
            </span>
          </em>
        </p>

        <p><h2>基本用法</h2><p>請參考下列文章</p>
<ul>
  <li><a href="https://segmentfault.com/a/1190000011105644">Guava Cache 用法介紹</a></li>
</ul><h2>CacheBuilder class 裡的 expireAfterWrite, expireAfterAccess, refreshAfterWrite method 區別</h2>
<ul>
  <li><p>expireAfterAccess</p>
  <ul>
    <li>一定時間內沒有讀寫，會移除該cache key，下次取的時候從 raw data (e.g. database) 裡取</li>
    <li>在更新 cache key 對應內容時，會 <code>block</code> 所有存取該 cache key 的 thread</li>
    <li>expireAfterAccess 行為分析請參考下列文章
    <ul>
      <li><a href="https://blog.csdn.net/aitangyong/article/details/53491867">Guava Cache特性：對於同一個key，只讓一個請求回源load數據，其他線程阻塞等待結果</a></li>
    </ul></li>
  </ul></li>
  <li><p>expireAfterWrite</p>
  <ul>
    <li>一定時間內沒有創建或覆寫時，會移除該 cache key，下次取的時候從 raw data (e.g. database) 裡取</li>
    <li>在更新 cache key 對應內容時，會 <code>block</code> 所有存取該 cache key 的所有 thread</li>
    <li>expireAfterWrite 是時間到了就 expire。expireAfterAccess 則是以 <code>上次取存的時間點</code> 為基準來記算何時會 expire，也就是說只要一直被存取就不會 expire</li>
  </ul></li>
  <li><p>refreshAfterWrite</p>
  <ul>
    <li>指定時間內沒有被創建或覆寫，在指定時間過後再次訪問時，會去更新 cache key 對應之值，在新值沒有到來之前，始終返回舊值。<code>注意!是再次訪問，也就是未訪問前可能都不會更新。</code></li>
    <li>在更新 cache key 對應內容時，<code>不會 block</code> 所有存取該 cache key 的 thread</li>
    <li>CacheBuilder 要產生 LoadingCache 時才可以叫用這個 method，不然會產生 <code>refreshAfterWrite requires a LoadingCache</code> exception</li>
    <li>跟 expireAfterAccess(或 expireAfterWrite) 區別
    <ul>
      <li>指定時間過後，expireAfterAccess(或 expireAfterWrite) 是 remove cache key，下次訪問是 <code>同步(sync)</code> 去獲取返回新值。新值未取回前，所有要取新值 的 thread 都會被 block。</li>
      <li>refresh 是指定時間後，不會 remove cache key，<code>直到下次訪問</code> 才以 <code>非同步(async)</code> 方式 refresh cache。在 refresh cache 動作完成前，大多數針對該 cache key 的請求 thread 會立刻返回舊值，不會被 block</li>
    </ul></li>
    <li>refreshAfterWrite 行為分析請參考下列文章
    <ul>
      <li><a href="https://blog.csdn.net/aitangyong/article/details/53504253">Guava Cache特性：refreshAfterWrite只阻塞回源線程，其他線程返回舊值</a></li>
    </ul></li>
  </ul></li>
</ul><h2>CacheBuilder class 裡的 expireAfterWrite, refreshAfterWrite method 可以一起使用</h2><p>二者一起使用時的行為請參考下列文章</p>
<ul>
  <li><p><a href="https://blog.csdn.net/abc86319253/article/details/53020432">深入Guava Cache的refresh和expire刷新機制</a></p><p>重點是這一段</p>
  <blockquote><p>可以看出refreshAfterWrite和expireAfterWrite兩種方式各有優缺點，各有使用場景。那麼能否在refreshAfterWrite和expireAfterWrite找到一個折中？比如說控制緩存每1s進行refresh，如果超過2s沒有訪問，那麼則讓緩存失效，下次訪問時不會得到舊值，而是必須得待新值加載。由於guava官方文檔沒有給出一個詳細的解釋，查閱一些網上資料也沒有得到答案，因此只能對源碼進行分析，尋找答案。經過分析，當同時使用兩者的時候，可以達到預想的效果，這真是一個好消息吶！</p>
  </blockquote></li>
  <li><p><a href="https://github.com/google/guava/wiki/CachesExplained#refresh">官方文件說明</a></p><p>重點是這一段，不過我沒有很懂它表達的意思</p>
  <blockquote><p>In contrast to expireAfterWrite, refreshAfterWrite will make a key eligible for refresh after the specified duration, but a refresh will only be actually initiated when the entry is queried. (If CacheLoader.reload is implemented to be asynchronous, then the query will not be slowed down by the refresh.) So, for example, you can specify both refreshAfterWrite and expireAfterWrite on the same cache, so that the expiration timer on an entry isn't blindly reset whenever an entry becomes eligible for a refresh, so if an entry isn't queried after it comes eligible for refreshing, it is allowed to expire.</p>
  </blockquote></li>
</ul><h2>reference document</h2>
<ul>
  <li><a href="https://segmentfault.com/a/1190000011105644">Guava Cache 用法介紹</a></li>
  <li><a href="https://blog.csdn.net/aitangyong/article/details/53491867">Guava Cache特性：對於同一個key，只讓一個請求回源load數據，其他線程阻塞等待結果</a></li>
  <li><a href="https://blog.csdn.net/aitangyong/article/details/53504253">Guava Cache特性：refreshAfterWrite只阻塞回源線程，其他線程返回舊值</a></li>
  <li><a href="https://my.oschina.net/scipio/blog/551475">guava緩存的expireAfterWrite與refreshAfterWrite的區別</a></li>
  <li><a href="https://blog.csdn.net/abc86319253/article/details/53020432">深入Guava Cache的refresh和expire刷新機制</a></li>
</ul></p>

        <hr />
      </div>

      <div>
        <a href="blog/2017/12/spring-restful-api-input-param-validate-memo.html" shape="rect"><h1>如何在 spring 實作的 restful api 裡使用 validation annotation</h1></a>
        <p>2017-12-29</p>

        <p>
          <em>Tags:
            <span>
              <a shape="rect" href="tags/程式語言.html">程式語言</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/java.html">java</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/spring.html">spring</a>
              
            </span>
          </em>
        </p>

        <p><h2>如何實作</h2><p>spring 實作的 restful api，要針對輸入參數進行內容格式驗証，可分成下列儿類</p><h3>針對 @RequestBody 進行 validation</h3><p>實作程式碼重點如下</p>
<!--?prettify linenums=true?-->
<pre><code class="java">@RestController
@RequestMapping(&quot;/validateAnnotationDemo&quot;)
public class ValidateAnnotationDemoController {
    @RequestMapping(value = &quot;/validateRequestBody&quot;, produces = MediaType.APPLICATION_JSON_VALUE)
    public User validateRequestBody(@Valid @RequestBody User user){
        ...etc;
    }

    private static class User{
        @NotBlank
        private String name;
        ...etc;
    }
}
</code></pre>
<!--?prettify linenums=true?-->
<pre><code class="java">@ControllerAdvice
public class GlobalExceptionHandler {
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity handleMethodArgumentNotValidException(HttpServletRequest req, MethodArgumentNotValidException e) {
        ...etc;
    }
}
</code></pre>
<ol>
  <li>@RequestBody 前面要加上 @Valid</li>
  <li>pojo (在此例指 User class) 要加上 validation annotation (e.g. @NotBlank, @NotNull ...etc)</li>
  <li>validate fail 會丟出 MethodArgumentNotValidException，要自己寫 handler 決定哪些異常明細回傳給前端</li>
</ol><h3>針對 @RequestParam 進行 validation</h3><p>實作程式碼重點如下</p>
<!--?prettify linenums=true?-->
<pre><code class="java">@Configuration
@ComponentScan
public class WebConfig {
    @Bean
    public MethodValidationPostProcessor methodValidationPostProcessor() {
        return new MethodValidationPostProcessor();
    }
}
</code></pre>
<!--?prettify linenums=true?-->
<pre><code class="java">@Validated
@RestController
@RequestMapping(&quot;/validateAnnotationDemo&quot;)
public class ValidateAnnotationDemoController {
    @RequestMapping(value = &quot;/validateRequestParam&quot;, produces = MediaType.APPLICATION_JSON_VALUE)
    public Map&lt;String,Object&gt; validateRequestParam(@NotBlank(message = &quot;message must not be blank&quot;) @RequestParam String message){
        ...etc;
    }
}
</code></pre>
<!--?prettify linenums=true?-->
<pre><code class="java">@ControllerAdvice
public class GlobalExceptionHandler {
    @ExceptionHandler(ConstraintViolationException.class)
    public ResponseEntity handleConstraintViolationException(HttpServletRequest req, ConstraintViolationException e){
        ...etc;
    }
}
</code></pre>
<ol>
  <li>要注冊 MethodValidationPostProcessor bean，不然無法對 @RequestParam 進行 validation</li>
  <li>在 @RestController 前面加上 @Validated</li>
  <li>在 @RequestParam 前面加上 validation annotation (e.g. @NotBlank, @NotNull ...etc)</li>
  <li>validate fail 會丟出 ConstraintViolationException，要自己寫 handler 決定哪些異常明細回傳給前端</li>
</ol><h2>完整範例</h2><h3>WebConfig.java</h3>
<!--?prettify linenums=true?-->
<pre><code class="java">@Configuration
@ComponentScan
public class WebConfig {

    /**
     * 注冊 MethodValidationPostProcessor bean 之後，Controller class 開頭加的 @Validated 與 method 裡針
     * 對 @RequestParam annotation 加的 validate annotation (e.g. @NotBlank, @NotNull ...etc)才會生效，
     * 沒注冊時就算程式碼裡有加這些 annotation 還是不會有作用
     *
     * @return
     */
    @Bean
    public MethodValidationPostProcessor methodValidationPostProcessor() {
        return new MethodValidationPostProcessor();
    }
}
</code></pre><h3>ValidateAnnotationDemoController.java</h3>
<!--?prettify linenums=true?-->
<pre><code class="java">@Validated
@RestController
@RequestMapping(&quot;/validateAnnotationDemo&quot;)
public class ValidateAnnotationDemoController {

    //在 class 開頭加了 @Validated 之後，針對 @RequestParam 加的 validation annotation (e.g. @NotBlank, @NotNull...etc) 才會生效
    @RequestMapping(value = &quot;/validateRequestParam&quot;, produces = MediaType.APPLICATION_JSON_VALUE)
    public Map&lt;String,Object&gt; validateRequestParam(
            @NotBlank(message = &quot;message must not be blank&quot;) @RequestParam String message){
        Map&lt;String,Object&gt; result = new HashMap&lt;&gt;();
        result.put(&quot;message&quot;, message);
        return result;
    }

    // 加對 @Valid 之後，會驗証 pojo (此例中指 User instance) 內容格式是否正確
    @RequestMapping(value = &quot;/validateRequestBody&quot;, produces = MediaType.APPLICATION_JSON_VALUE)
    public User validateRequestBody(@Valid @RequestBody User user){
        return user;
    }

    private static class User{
        @NotBlank
        private String name;

        // 針對 list of pojo 的資料格式進行驗証，要加上 @NotEmpty, @Valid 二個 annotation
        @NotEmpty
        @Valid
        private List&lt;ContactInfo&gt; contactInfoList;

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public List&lt;ContactInfo&gt; getContactInfoList() {
            return contactInfoList;
        }

        public void setContactInfoList(List&lt;ContactInfo&gt; contactInfoList) {
            this.contactInfoList = contactInfoList;
        }
    }

    private static class ContactInfo{
        @NotBlank
        private String address;

        public String getAddress() {
            return address;
        }

        public void setAddress(String address) {
            this.address = address;
        }
    }
}
</code></pre><h3>GlobalExceptionHandler.java</h3>
<!--?prettify linenums=true?-->
<pre><code class="java">/**
 * Controller 發生 uncatch exception 情況時，會統一在這個 class 被處理。
 */
@ControllerAdvice
public class GlobalExceptionHandler {
    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);

    @ExceptionHandler(Exception.class)
    public ResponseEntity handleException(HttpServletRequest req, Exception e){
        logger.error(e.getMessage(), e);
        String errorMsg = (e.getMessage() == null) ? e.getClass().getSimpleName() : e.getMessage();
        Map&lt;String,Object&gt; error = Collections.singletonMap(&quot;error&quot;, errorMsg);
        return ResponseEntity.status(500).body(error);
    }

    /**
     * Controller 裡標注 @RequestParam 的變數在 validate fail 時會丟出 ConstraintViolationException。這個 method
     * 專門處理此類 exception
     *
     * @param req
     * @param e
     *
     * @return
     */
    @ExceptionHandler(ConstraintViolationException.class)
    public ResponseEntity handleConstraintViolationException(HttpServletRequest req, ConstraintViolationException e){
        logger.error(e.getMessage(), e);
        // &quot;@NotBlank @RequestParam String myArg&quot; 這樣的 validate 寫法在 validate fail 時無法得知 &quot;哪個輸入參數名稱&quot; 驗証失敗，這是 java reflection 本身的限制。
        // 用這類語法時要改寫成 &quot;@NotBlank(myArg must not be blank) @RequestParam String myArg&quot;，程式裡的 validate annotation 要寫出 &quot;完整出錯明細&quot;，
        // 不然在處理 ConstraintViolationException 時只會知道驗証失敗的原因，卻不知道是哪個輸入參數名稱驗証失敗。
        List&lt;String&gt; errorMessages = e.getConstraintViolations()
                .stream()
                .map(ConstraintViolation::getMessage)
                .collect(Collectors.toList());
        Map&lt;String,Object&gt; error = Collections.singletonMap(&quot;error&quot;, errorMessages);
        return ResponseEntity.status(400).body(error);
    }

    /**
     * Controller 裡標注 @RequestBody 的變數在 validate fail 時會丟出 MethodArgumentNotValidException。這個 method
     * 專門處理此類 exception
     *
     * @param req
     * @param e
     *
     * @return
     */
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity handleMethodArgumentNotValidException(HttpServletRequest req, MethodArgumentNotValidException e) {
        logger.error(e.getMessage(), e);
        List&lt;String&gt; errorMessages = e.getBindingResult().getFieldErrors()
                .stream()
                .map(fieldError -&gt; fieldError.getField() + &quot; &quot; + fieldError.getDefaultMessage()) // 記錄 &quot;fieldName + validateFailMessage&quot;
                .collect(Collectors.toList());
        Map&lt;String,Object&gt; error = Collections.singletonMap(&quot;error&quot;, errorMessages);
        return ResponseEntity.status(400).body(error);
    }
}
</code></pre><h2>reference document</h2>
<ul>
  <li><a href="https://www.jianshu.com/p/51e8d2702ca1">在Spring MVC中使用註解的方式校驗RequestParams</a></li>
  <li><a href="https://sdqali.in/blog/2015/12/04/validating-requestparams-and-pathvariables-in-spring-mvc/">Validating RequestParams and PathVariables in Spring MVC</a></li>
  <li><a href="https://stackoverflow.com/a/38615327/8646444">Spring Boot REST @RequestParam not being Validated</a></li>
  <li><a href="https://stackoverflow.com/a/35588953/8646444">Spring MVC - @Valid on list of beans in REST service</a></li>
</ul></p>

        <hr />
      </div>

      <div>
        <a href="blog/2016/02/mac-memo-for-beginner.html" shape="rect"><h1>MAC 新手入門筆記</h1></a>
        <p>2016-03-04</p>

        <p>
          <em>Tags:
            <span>
              <a shape="rect" href="tags/mac.html">mac</a>
              
            </span>
          </em>
        </p>

        <p><p>儿個月前因為工作需要摸了一陣子 MAC 筆電，有一些簡單心得，所以做個筆記以備未來不時之需 :)</p><h2>MAC OS 入門影片</h2>
<ol>
  <li>英文
  <ul>
    <li><a href="https://www.youtube.com/watch?v=wSPisJXyjso">Learn the MAC In Under 90 Minutes 2015 Yosemite Edition</a></li>
    <li><a href="https://www.youtube.com/watch?v=kgS6E-6vStA">El Capitan OS X Tutorial</a></li>
  </ul></li>
  <li>中文
  <ul>
    <li><a href="https://www.youtube.com/playlist?list=PLtDm33ESx3munKRdCXwvw4Bge2k2b-RZh">Mac OS X 基礎教學</a></li>
    <li><a href="https://www.youtube.com/playlist?list=PL7A481B6116A5B721">Mac 相關教學</a></li>
  </ul></li>
</ol><h2>MAC OS 入門文件</h2>
<ul>
  <li><a href="http://appleuser.com/mac-os-x-teach-all/">Mac 新手教學區</a></li>
  <li><a href="http://mac-osx-for-newbie-book.kejyun.com/">Mac OSX 新手入門</a></li>
  <li><a href="http://www.playpcesor.com/2014/01/mac-macbook-air.html">[Mac 新手日記] 讓 Macbook Air 靈活百倍的觸控板手勢教學</a></li>
  <li><a href="http://www.playpcesor.com/2015/04/mac-10-finder.html">Mac 用戶一定要知道這10個 Finder 獨特檔案整理技巧</a></li>
  <li><a href="http://www.playpcesor.com/2014/01/mac-apple-mac-os-x.html">[Mac 新手日記] Apple Mac OS X 截圖文書必備快捷鍵教學</a></li>
  <li><a href="http://www.playpcesor.com/2015/05/Mac-preview-photo-pdf-editor.html">Mac 用戶不可不用預覽程式：13招取代修圖 PDF 軟體</a></li>
  <li><a href="http://www.playpcesor.com/2015/04/mac-photos-app-14.html">Mac 全新內建 Photos 照片 App 你一定要會的14件事</a></li>
  <li><a href="http://www.playpcesor.com/2014/03/mac-quicktime-player.html">[Mac 新手日記] QuickTime Player 螢幕錄影與影片剪輯教學</a></li>
</ul><h2>SSH 相關 console command</h2>
<ol>
  <li><p>產生 SSH 公私鑰</p>
  <!--?prettify?-->
  <pre><code>ssh-keygen -t rsa
</code></pre></li>
  <li><p>Storing Passphrases in the Keychain, 免除每次 ssh 連線都要指定 private key 所在位置</p>
  <!--?prettify?-->
  <pre><code>ssh-add -K /path/to/private/key/file
</code></pre></li>
  <li><p>相關參考文件</p>
  <ul>
    <li><a href="http://blog.longwin.com.tw/2005/12/ssh_keygen_no_passwd/">http://blog.longwin.com.tw/2005/12/ssh_keygen_no_passwd/</a></li>
    <li><a href="https://ekkescorner.wordpress.com/blog-series/git-mercurial/step-by-step-ssh-on-osx-ubuntu-and-windows/">https://ekkescorner.wordpress.com/blog-series/git-mercurial/step-by-step-ssh-on-osx-ubuntu-and-windows/</a></li>
    <li><a href="http://stackoverflow.com/a/11673152">http://stackoverflow.com/a/11673152</a></li>
  </ul></li>
</ol><h2>利用 homebrew 指令安裝軟體</h2><p>homebrew 可以幫你用 <code>console command</code> 的方式安裝與管理各種軟體，可以讓你在這方面省掉很多時間，強烈推薦要用這個好物。下面列的是我常會利用 homebrew 安裝的軟體。</p>
<!--?prettify?-->
<pre><code># install xcode command tool
xcode-select --install
# check xcode command tool
xcode-select -p

# install homebrew
ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
# check homebrew install success or not
brew doctor
brew update

# install homebrew-cask
brew tap caskroom/cask
brew install brew-cask

# i install these soft below by brew &amp; brew-cask

brew install wget
brew install curl
brew install git
brew install htop-osx

# install java7
brew cask install caskroom/versions/java7
# install java8
brew cask install java

brew cask install intellij-idea-ce
brew cask install eclipse-jee

brew install maven
brew install gradle

brew cask install sourcetree
brew cask install cyberduck
brew cask install dbeaver-enterprise

brew cask install google-chrome
brew cask install firefox
brew cask install flash

brew cask install bettertouchtool
</code></pre><h2>其它實用的教學文件</h2>
<ul>
  <li><a href="http://aimijia.net/2014/05/each-mac-os-x-command-line-users-should-be-aware-of-the-eight-terminal-tool/">【譯】每個Mac OS X 命令行用戶應當知道的八個終端工具</a></li>
</ul></p>

        <hr />
      </div>

      <div>
        <a href="blog/2015/09/spring-boot-official-doc-memo.html" shape="rect"><h1>spring boot 官方文件摘要</h1></a>
        <p>2015-09-09</p>

        <p>
          <em>Tags:
            <span>
              <a shape="rect" href="tags/程式語言.html">程式語言</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/java.html">java</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/gradle.html">gradle</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/spring.html">spring</a>
              
            </span>
          </em>
        </p>

        <p><p>這篇內容寫的是 <a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/">spring boot 1.2.5 官方文件</a> 重點摘要，不做 spring boot 基礎教學。要看懂這些內容有下列前題假設</p>
<ol>
  <li>會用 java 寫 spring boot 程式</li>
  <li>會用 gradle 寫 build script</li>
</ol><p>如果你完全不懂 spring boot，建議看一下 Bootify your spring application (<a href="http://www.slideshare.net/gn00023040/bootify-your-spring-application">投影片</a>)(<a href="https://www.youtube.com/watch?v=PTIRJZUMf78">錄影</a>)，看完後會對 spring boot 有基本認知，有助於日後快速上手。</p><h2>spring-boot-teach 教學程式解說</h2><p>我針對官方文件寫了個 <a href="https://github.com/cloudtu/spring-boot-teach">spring-boot-teach 教學程式</a> 放在 github 上，請把它抓回來看看程式怎麼寫、怎麼運作。此外，這節出現的範列在內容上有前後關係，所以這節內容不要跳著看，不然會發生看完後卻看不懂在講什麼的鳥事</p><h3>程式目錄結構</h3><p><img src="/img/2015/09/spring-boot-teach-folder-structure.png" alt="教學程式目錄結構""/></p><h3>application-context.xml</h3>
<!--?prettify?-->
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;bean id=&quot;hello&quot; class=&quot;cloudtu.bean.Hello&quot;/&gt;
&lt;/beans&gt;
</code></pre><p>這個 spring xml 設定檔會在 java config 時被匯入</p><h3>application.properties</h3>
<!--?prettify?-->
<pre><code>server.port=8080
# enable Tomcat&#39;s HTTP response compression
server.tomcat.compression=on

# set actuator HTTP port  
management.port=8081
# 只許可經由內網網址連入 actuator，可避免監控資料外流
management.address=127.0.0.1

welcome.first-message=java run anywhere
welcome.secondMessage=spring boot is easy to use

appVersion=1.0.0

db.prd.name=prd123
db.dev.name=dev456
# 設定要啟用哪些 profile
spring.profiles.active=dev
</code></pre><p><code>application.properties</code> 是 spring boot 預設的外部設定檔。因為我針對 actuator 功能設定了 <code>management.port=8081</code>、<code>management.address=127.0.0.1</code>，所以只能用 <code>http://127.0.0.1:8081/${actuator_endpoint}</code> 這類網址才可以取得 actuator 提供的資訊</p><h3>author.properties</h3>
<!--?prettify?-->
<pre><code>author.name=cloudtu
author.department=RD team
</code></pre><p>除了 <code>application.properties</code> 之外自訂的設定檔，之後會提供給 author bean 使用</p><h3>Application.java</h3>
<!--?prettify linenums=true?-->
<pre><code class="java">package cloudtu;

...etc
import cloudtu.bean.Author;
import cloudtu.bean.DbName;

// @SpringBootApplication = @Configuration + @EnableAutoConfiguration + @ComponentScan
@SpringBootApplication
// 匯入 XML 格式的 spring 設定檔
@ImportResource(&quot;classpath:application-context.xml&quot;)
// 設定 property file 設定檔的來源位置
@PropertySource(&quot;classpath:author.properties&quot;)
public class Application {
    ...etc

    // author.properties 裡的 author.* 設定會自動綁定到 authorName, authorDept 變數
    @Value(&quot;${author.name}&quot;) private String authorName;
    @Value(&quot;${author.department}&quot;) private String authorDept;

    @Bean
    public Author author(){
        Author author = new Author();
        // 手工指定 author bean 裡的各項 setter 設定
        author.setName(authorName);
        author.setDepartment(authorDept);
        return author;
    }

    @Bean
    // application.properties 裡的 db.prd.* 設定會自動綁定到 prdDbName bean
    @ConfigurationProperties(prefix=&quot;db.prd&quot;)
    @Profile(&quot;prd&quot;)
    public DbName prdDbName(){
        return new DbName();
    }

    @Bean
    // application.properties 裡的 db.dev.* 設定會自動綁定到 devDbName bean
    @ConfigurationProperties(prefix=&quot;db.dev&quot;)
    @Profile(&quot;dev&quot;)
    public DbName devDbName(){
        return new DbName();
    }

    public static void main(String[] args) {
        ApplicationContext context = SpringApplication.run(Application.class, args);
        ...etc
    }
}
</code></pre><p>程式碼關鍵處都加了註解，所以看完後你應該知道裡面各個 annotation 用法，不過有儿個地方再補充說明一下。<br/>1. <code>@ConfigurationProperties</code> 可以把 *.property 設定檔的設定值經由各個 bean 的 setter 進行自動綁定動作<br/>2. 在 <code>application.properties</code> 裡設定了 <code>spring.profiles.active=dev</code>，所以程式裡有 <code>@Profile(&quot;dev&quot;)</code> 宣告的 devDbName bean 在執行時會產生，但是有 <code>@Profile(&quot;prd&quot;)</code> 宣告的 prdDbName bean 在執行時不會產生</p><h3>Welcome.java</h3>
<!--?prettify linenums=true?-->
<pre><code class="java">package cloudtu.bean;

...etc
@Component
// application.properties 裡的 welcome.* 設定會自動綁定到 welcome bean
@ConfigurationProperties(prefix=&quot;welcome&quot;)
public class Welcome {
    private String firstMessage;
    private String secondMessage;

    // application.properties 裡的 welcome.first-message 設定綁定到 firstMessage instance variable
    public void setFirstMessage(String firstMessage) {
        this.firstMessage = firstMessage;
    }
    // application.properties 裡的 welcome.secondMessage 設定綁定到 secondMessage instance variable
    public void setSecondMessage(String secondMessage) {
        this.secondMessage = secondMessage;
    }
    ...etc
}
</code></pre><p>這個範例也是在介紹 <code>@ConfigurationProperties</code> 用法，不過你會發現設定檔裡的名稱格式不一致， <code>welcome.first-message</code> 用 <code>-</code> 當變數名稱裡的分隔符號，另一個 <code>welcome.secondMessage</code> 則是用 lower camel case 命名方式。這兩種設定方式 spirng boot 都可以接受</p><h3>AppVersion.java</h3>
<!--?prettify linenums=true?-->
<pre><code class="java">package cloudtu.bean;

...etc
@Component
public class AppVersion {
    // application.properties 裡的 appVersion 設定會自動綁定到 appVersion 變數
    @Value(&quot;${appVersion}&quot;) String appVersion;
    ...etc
}
</code></pre><p><code>application.properties</code> 裡的設定可以用 <code>@Value(&quot;${appVersion}&quot;)</code> 這類的宣告方式直接綁定到 bean 裡面</p><h3>Filters.java</h3>
<!--?prettify linenums=true?-->
<pre><code class="java">package cloudtu.web;

...etc
@Configuration
public class Filters{
    ...etc

    // spring boot 預設的 url mapping 是  &quot;/*&quot;，所以任何 request 都會經過 firstFilter bean
    @Component
    private static class FirstFilter implements Filter{
        ...etc
    }

    private static class SecondFilter implements Filter{
        ...etc
    }

    @Bean
    public FilterRegistrationBean secondFilter(){
        FilterRegistrationBean registration = new FilterRegistrationBean(new SecondFilter());
        // 改寫掉預設的 url mapping，只有 &quot;/hello&quot; 的 request 會經過 secondFilter bean
        registration.addUrlPatterns(&quot;/hello&quot;);
        return registration;
    }
}
</code></pre>
<ol>
  <li><code>Filter</code> 可以直接加 <code>@Component</code> 讓它變成 spring 裡的 bean，firstFilter bean 就是這樣宣告。但是這樣宣告 filter 會讓它的 url mapping 固定都是 <code>/*</code></li>
  <li>如果想自定 url mapping，要用 <code>FilterRegistrationBean</code> 把 <code>Filter</code> 給包起來，secondFilter bean 就是在講自訂 url mapping 的寫法</li>
</ol><h3>官方文件裡與教學程式相關的章節</h3>
<ul>
  <li>configuration
  <ul>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#getting-started-first-application-auto-configuration">11.3.2 The @EnableAutoConfiguration annotation</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#using-boot-importing-configuration">15.1 Importing additional configuration classes</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#using-boot-importing-xml-configuration">15.2 Importing XML configuration</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#using-boot-structuring-your-code">18. Using the @SpringBootApplication annotation</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features">23. Externalized Configuration</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-external-config-command-line-args">23.2 Accessing command line properties</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-external-config-application-property-files">23.3 Application property files</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-external-config-placeholders-in-properties">23.5 Placeholders in properties</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-external-config-typesafe-configuration-properties">23.7 Typesafe Configuration Properties</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-profiles">24. Profiles</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-understanding-auto-configured-beans">36.1 Understanding auto-configured beans</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#common-application-properties">Appendix A. Common application properties</a> : 有 <code>application.properties</code> 常用參數名稱與用途說明</li>
  </ul></li>
  <li>web developing
  <ul>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#_servlet_containers">9.1 Servlet containers</a> : 有支援的 embedded servlet containers 明細列表</li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications">26. Developing web applications</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration">26.1.1 Spring MVC auto-configuration</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-static-content">26.1.4 Static Content</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-template-engines">26.1.5 Template engines</a> : 有支援的 template engine 清單</li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-embedded-container-servlets-and-filters">26.3.1 Servlets and Filters</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-customizing-embedded-containers">26.3.3 Customizing embedded servlet containers</a></li>
    <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-jsp-limitations">26.3.4 JSP limitations</a> : 有寫 JSP 的人要注意一下 sprint boot 在 JSP 方面的限制</li>
  </ul></li>
</ul><h2>官方範列程式</h2><p>官方在 github 有放 <a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples">spring boot 官方範列程式</a>，搞不懂某些功能怎麼用時可以去那邊找找有沒有解答</p><h2>Testing</h2><p>官方文件裡較重要相關章節條列如下</p>
<ul>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-testing-spring-boot-applications">35.3 Testing Spring Boot applications</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-rest-templates-test-utility">35.4.4 TestRestTemplate</a></li>
</ul><h2>監控管理</h2><p>官方文件裡較重要相關章節條列如下</p>
<ul>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#production-ready-endpoints">40. Actuator endpoints</a> : 有 actuator endpoints 明細列表</li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#production-ready-sensitive-endpoints">41.1 Securing sensitive endpoints</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#production-ready-customizing-management-server-port">41.3 Customizing the management server port</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#production-ready-metrics">44. Metrics</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#production-ready-system-metrics">44.1 System metrics</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#production-ready-datasource-metrics">44.2 DataSource metrics</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#production-ready-session-metrics">44.3 Tomcat session metrics</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#production-ready-tracing">46. Tracing</a></li>
</ul><h2>Build by gradle</h2><h3>spring-boot-teach 教學程式裡的 build.gradle</h3>
<!--?prettify?-->
<pre><code>buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:1.2.5.RELEASE&quot;)
    }
}

// 引用 spring boot plugin
apply plugin: &quot;spring-boot&quot;
...etc

configurations {
    providedRuntime

    // spring boot 預設使用 logback 但是我要用 log4j，所以必需把 spring-boot-starter-logging 排除掉
    compile.exclude module: &quot;spring-boot-starter-logging&quot;
}

dependencies {
    compile(&quot;org.springframework.boot:spring-boot-starter-web&quot;)
    // spring-boot-starter-actuator 提供 &quot;監控 app 運作狀況&quot; 功能
    compile(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)
    // 改用 log4j 不用預設的 logback
    compile(&quot;org.springframework.boot:spring-boot-starter-log4j&quot;)
    ...etc
}
</code></pre><p>範例解說如下<br/>1. 引用了 spring boot plugin 之後就可以利用它提供的各項專屬 task (e.g. bootRun, bootRepackage) 進行開發<br/>2. spring boot 預設的 log 是 logback，我把它換成了 log4j。因為所有 spring-boot-starter-* 的 pom 都相依於 spring-boot-starter-logging，spring-boot-starter-logging 又相依於 logback，所以要加上 <code>compile.exclude module: &quot;spring-boot-starter-logging&quot;</code> 把所有 pom 裡的 spring-boot-starter-logging 相依都排除掉，不然程式裡的 log 會出現部份相依 logback 部份相依 log4j 的問題</p><h3>常用的 gradle 指令</h3>
<ul>
  <li><code>gradle bootRun</code>
  <ul>
    <li>Run the project with support for auto-detecting main class and reloading static resources</li>
    <li>直接執行 compile 好的 class，不會打包成 war 或 jar</li>
  </ul></li>
  <li><code>gradle bootRepackage</code>
  <ul>
    <li>Repackage existing JAR and WAR archives so that they can be executed from the command line using 'java -jar'</li>
    <li>先把程式打包成 executable jar (or war)，然後再執行 jar (or war)</li>
  </ul></li>
</ul><h3>官方文件裡較重要相關章節</h3>
<ul>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#getting-started-gradle-installation">10.1.2 Gradle installation</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#using-boot-starter-poms">13.4 Starter POMs</a> : 有所有 starter pom 明細列表</li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#using-boot-running-with-the-gradle-plugin">19.4 Using the Gradle plugin</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#build-tool-plugins-including-the-gradle-plugin">59.1 Including the plugin</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#build-tool-plugins-gradle-dependencies-without-versions">59.2 Declaring dependencies without versions</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#build-tool-plugins-gradle-packaging">59.4 Packaging executable jar and war files</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#build-tool-plugins-gradle-running-applications">59.5 Running a project in-place</a></li>
</ul><h2>‘How-to’ guides</h2><p>官方文件有列出常見問題與解答，下列儿項是我目前比較會遇到的項目</p>
<ul>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-use-yaml-for-external-properties">63.4 Use YAML for external properties</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-add-a-servlet-filter-or-servletcontextlistener">64.1 Add a Servlet, Filter or ServletContextListener to an application</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-configure-ssl">64.6 Configure SSL</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-enable-multiple-connectors-in-tomcat">64.8 Enable Multiple Connectors with Tomcat</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-use-tomcat-behind-a-proxy-server">64.9 Use Tomcat behind a front-end proxy server</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-use-jetty-instead-of-tomcat">64.10 Use Jetty instead of Tomcat</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#how-to-enable-http-response-compression-tomcat">64.18.1 Enable Tomcat’s HTTP response compression</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-write-an-xml-rest-service">65.2 Write an XML REST service</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-configure-log4j-for-logging">66.2 Configure Log4j for logging</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-two-datasources">67.2 Configure Two DataSources</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-customize-the-whitelabel-error-page">70.2 Customize the ‘whitelabel’ error page</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-enable-https">71.3 Enable HTTPS when running behind a proxy server</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-reload-thymeleaf-content">72.2 Reload Thymeleaf templates without restarting the container</a></li>
  <li><a href="http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#howto-create-a-deployable-war-file">74.1 Create a deployable war file</a></li>
</ul></p>

        <hr />
      </div>

      <div>
        <a href="blog/2015/09/gradle-learning-path.html" shape="rect"><h1>gradle learning path</h1></a>
        <p>2015-09-03</p>

        <p>
          <em>Tags:
            <span>
              <a shape="rect" href="tags/程式語言.html">程式語言</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/java.html">java</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/groovy.html">groovy</a>
              <span>,</span>
            </span>
            <span>
              <a shape="rect" href="tags/gradle.html">gradle</a>
              
            </span>
          </em>
        </p>

        <p><p>我用 gradle 當 build tool 已經好一陣子，通常照著網路上的 gradle 範例去修改就可以讓它滿足我的需求，真是超方便。可是對於 gradle script 為啥長這個樣子? 它的運作原理為何? 我一直搞不懂所以然。這次花了些時間終於了解它的基礎原理到底是怎麼回事。下述是我學習 gradle 基礎原理的 learning path，請照條列順序依序閱讀，看完後就可以對 gradle 知其然又知其所以然!</p>
<ol>
  <li>想要 gradle 快速上手? 看 popcorn 的 "Gradle起步走(<a href="http://www.slideshare.net/popcornylu/gradle-cli-application">投影片</a>、<a href="https://www.youtube.com/watch?v=rWXspaS-pHI">影片</a>)" 就對啦</li>
  <li>對 gradle 有點 fu 之後就可以把 <a href="https://www.manning.com/books/gradle-in-action">grdle in action</a> 這本書拿來看了。整本書分成三個 part，只要看 part1, part2 就夠了，part3 是比較進階的應用，未來有需要的話再來看</li>
  <li>grdle in action 看完後可能會覺的對 gradle script 的 groovy 語法理解太少，這時必需看一些 groovy 語法說明，所以下面這些資料都看一看吧。
  <ul>
    <li><a href="https://www.manning.com/books/gradle-in-action">grdle in action</a> 的 Appendix B 章節</li>
    <li><a href="http://www.vogella.com/tutorials/Groovy/article.html">Groovy with Eclipse - Tutorial</a> 的項次 1 ~ 14 內容</li>
    <li><a href="http://www.slideshare.net/JustinSDK/groovy-gradle?ref=http://www.codedata.com.tw/java/groovy-gradle-abc/">淺談 Groovy 與 Gradle</a>。這份 slide 看完後對 groovy 的 closure 會有很清楚的理解，也終於知道 gradle script 語法用了大量的 closure</li>
  </ul></li>
  <li>前面的都看完後就可以開始看下列講 gradle 運作原理的文章，看完後就會知道 gradle script 語法其實是 groovy closure 與 delegate pattern 的組合
  <ul>
    <li><a href="http://www.codedata.com.tw/java/understanding-gradle-1-ant/">【認識 Gradle】（1）講古的時間 Apache Ant</a></li>
    <li><a href="http://www.codedata.com.tw/java/understanding-gradle-2-maven/">【認識 Gradle】（2）講古的時間 Apache Maven</a></li>
    <li><a href="http://www.codedata.com.tw/java/understanding-gradle-3-getting-started/">【認識 Gradle】（3）Gradle 起手式</a></li>
    <li><a href="http://www.codedata.com.tw/java/understanding-gradle-4-gradle-script/">【認識 Gradle】（4）看懂 Gradle Script</a>。這份文件解釋了 gradle script 語法跟 groovy closure 、delegate pattern 的關聯性</li>
    <li><a href="http://www.codedata.com.tw/java/understanding-gradle-3-gradle-task-abc/">【認識 Gradle】（5）Gradle Task 觀念導讀</a>。這份文件解釋了 gradle task 裡的 action closure、configure closure 是怎麼一回事。</li>
    <li><a href="http://www.codedata.com.tw/java/understanding-gradle-4-java-project-build-script-customization/">【認識 Gradle】（6）Java 專案與 Build Script 客製化</a></li>
    <li><a href="http://www.codedata.com.tw/java/understanding-gradle-7-java-project-dependencies/">認識 Gradle】（7）Java 專案相依管理</a></li>
    <li><a href="http://www.codedata.com.tw/java/understanding-gradle-8-reuse-logic/">【認識 Gradle】（8）邏輯重用</a></li>
  </ul></li>
  <li>前述資料都看完後對於 gradle 官網的 <a href="https://docs.gradle.org/current/userguide/userguide.html">user guide </a>、<a href="https://docs.gradle.org/current/dsl/">DSL Reference</a>、<a href="https://docs.gradle.org/current/javadoc/">javadoc</a> 應該就都看的懂，而不會在查閱時有摸不著頭緒的感覺了</li>
</ol></p>

        <hr />
      </div>

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <p>較舊的文章在
      <a href="archive.html" shape="rect">archive</a> 專區.</p>
    </div>
  </div>

  <div>
      <div id="push"></div>

        <div id="footer">
          <div class="container">
            <p class="muted credit">&copy; <span>2018</span> CloudTu | Baked with <a href="http://jbake.org" shape="rect">JBake
              <span>v2.3.2</span></a></p>
          </div>
        </div>

        <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script xml:space="preserve" src="/js/jquery-2.1.1.min.js"></script>
        <script xml:space="preserve" src="/js/bootstrap.min.js"></script>
        <script xml:space="preserve" src="/js/prettify.js"></script>

      </div>
    </body>
</html>
